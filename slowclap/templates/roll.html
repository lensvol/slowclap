<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/static/css/bootstrap.css" rel="stylesheet" type="text/css" />

    <title>Event roll</title>
    <style>
    body {
        font-family: Helvetica Neue, Arial, sans-serif;
    }

    tr.done {
        text-decoration: line-through;
        color: red;
    }

    td.event-start {
        text-align: center;
        width: 10%;
    }

    .hidden {
      display: none;
      visibility: hidden;
    }

    th {
      text-align: center;
    }

    td {
      text-align: center;
    }

    .panel-body {
      margin: 0px;
      padding: 0px;
    }

    .panel-body > table {
       margin-bottom: 0px;
    }

    .panel-heading .accordion-toggle:after {
        /* symbol for "opening" panels */
        font-family: 'Glyphicons Halflings';  /* essential for enabling glyphicon */
        content: "\e114";    /* adjust as needed, taken from bootstrap.css */
        float: right;        /* adjust as needed */
        color: grey;         /* adjust as needed */
    }
    .panel-heading .accordion-toggle.collapsed:after {
        /* symbol for "collapsed" panels */
        content: "\e080";    /* adjust as needed, taken from bootstrap.css */
    }

    </style>
  </head>
  <body>
    <div id="noscript">
    К сожалению, ваш браузер не поддерживает Javascript. Для просмотра программы
    вам необходимо перейти <a href="{% url 'slowclap.views.noscript_roll' %}">по этой ссылке</a>.
    </div>

    {% verbatim %}
    <div id="placeholder" style="display: none">Подождите, выполняется загрузка программы...</div>

    <div class="container">
      <div id="roll" style="display: none">
        <nav class="navbar navbar-default" role="navigation">
          <div id="filter-navbar">
            <ul class="nav navbar-nav">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span v-text="filter_by.category"></span> <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#" v-on="click:clearCategoryFilter()">Все категории</a></li>
                  <li v-repeat="categories"><a href="#" v-on="click:setCategoryFilter(this)">{{name}}</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span v-text="filter_by.date | shortdate"></span> <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li v-repeat="dates"><a href="#" v-on="click:filterByDate(this.$value)">{{$value | shortdate}}</a></li>
                </ul>
              </li>
            </ul>
            <form class="navbar-form navbar-left" role="search" v-on="submit:filterByText" action="#">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Поиск" v-model="text_filter" v-on="keydown:submit | key enter">
              </div>
              <button type="submit" class="btn btn-default">Поиск</button>
            </form>

          </div>
        </nav>

        <div class="panel-group accordion">
          <div v-repeat="blocks" v-component="event-block" class="{{ filtered_out ? 'hidden' : ''}}" style="margin-bottom: 10px">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse{{ block_id }}">{{ name }} <b>[{{ start | hourmin }}]</b></a>
                </h4>
              </div>
              <div id="collapse{{ block_id }}" class="panel-collapse collapse in">
                <div class="panel-body">
                  <table class="table table-condensed table-responsive table-bordered">
                    <tr v-repeat="events" v-component="event" id="event-{{ event_id }}" class="{{ hidden ? 'hidden' : '' }}">
                      <td class="col-sm-2">{{ category }}</td>
                      <td class="col-sm-2">{{ start | hourmin }}</td>
                      <td class="col-sm-10">{{ name }} <b>{{ number ? '[#' + number + ']' : '' }}</b></td>
                      <!--<td class="col-sm-2">{{ number ? number }</td>-->
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endverbatim %}

    <script language="JavaScript" src="/static/js/vue.js"></script>
    <script language="JavaScript" src="/static/js/jquery-1.11.0.js"></script>
    <script language="JavaScript" src="/static/js/bootstrap.js"></script>
    <script language="JavaScript" src="/static/eventroll.js"></script>
  </body>
</html>
